#!/usr/bin/env bash
#
# make a copy of the target file with a timestamped .bak extension

for file in "$@"; do
  date="$(date +%Y%m%d-%H%m%S)" || exit
  oldname="$(readlink -f "$file")" || exit
  newname="$oldname"."$date".bak

  ( set -x ; cp -r --reflink=auto "$file" "$newname" )
done

# EOF
